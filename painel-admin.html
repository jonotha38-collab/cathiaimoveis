<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Administração | Cathia Aguiar</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            background: #1a1a1a;
            color: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: #aaa;
        }

        .btn-logout {
            background: #C9A227;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: #b8931f;
        }

        .form-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
            margin-bottom: 2rem;
        }

        .form-section h2 {
            color: #1a1a1a;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            padding: 0.85rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #C9A227;
            box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .image-inputs {
            background: #f9f9f9;
            padding: 1.5rem;
            border-radius: 4px;
            border: 2px dashed #ddd;
            margin-bottom: 1rem;
        }

        .image-input-item {
            margin-bottom: 1rem;
        }

        .image-input-item:last-child {
            margin-bottom: 0;
        }

        .image-preview {
            margin-top: 0.5rem;
            max-width: 200px;
            border-radius: 4px;
            overflow: hidden;
        }

        .image-preview img {
            width: 100%;
            height: auto;
        }

        .btn-add-image {
            background: #f0f0f0;
            color: #666;
            padding: 0.6rem 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .btn-add-image:hover {
            background: #e0e0e0;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-submit {
            background: #C9A227;
            color: white;
            padding: 0.85rem 2rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .btn-submit:hover {
            background: #b8931f;
            transform: translateY(-2px);
        }

        .btn-submit:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-reset {
            background: #f0f0f0;
            color: #666;
            padding: 0.85rem 2rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .btn-reset:hover {
            background: #e0e0e0;
        }

        .status-message {
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            display: none;
        }

        .status-message.success {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #2e7d32;
            display: block;
        }

        .status-message.error {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #c62828;
            display: block;
        }

        .properties-list {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
            overflow: hidden;
        }

        .properties-list h2 {
            padding: 2rem;
            border-bottom: 1px solid #eee;
            color: #1a1a1a;
        }

        .property-item {
            border-bottom: 1px solid #eee;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .property-item:hover {
            background: #f9f9f9;
        }

        .property-info h3 {
            color: #1a1a1a;
            margin-bottom: 0.5rem;
        }

        .property-info p {
            color: #666;
            font-size: 0.9rem;
            margin: 0.25rem 0;
        }

        .property-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-delete {
            background: #ff6b6b;
            color: white;
            padding: 0.6rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .btn-delete:hover {
            background: #ff5252;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        .loading i {
            font-size: 2rem;
            margin-right: 0.5rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <div>
                <h1>Painel de Administração</h1>
                <p>Gerenciar imóveis e propriedades</p>
            </div>
            <button class="btn-logout" onclick="window.location.href='index.html'">
                <i class="fas fa-arrow-left"></i> Voltar ao Site
            </button>
        </div>

        <!-- FORM SECTION -->
         <div class="form-section">
             <div style="display: flex; justify-content: space-between; align-items: center;">
                 <h2 id="formTitle">Adicionar Novo Imóvel</h2>
                 <button type="button" id="cancelEditBtn" class="btn-reset" style="display: none; margin: 0;" onclick="cancelEdit()">
                     <i class="fas fa-times"></i> Cancelar Edição
                 </button>
             </div>
             <div id="statusMessage" class="status-message"></div>

            <form id="propertyForm">
                <!-- INFORMAÇÕES BÁSICAS -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="title">Título do Imóvel *</label>
                        <input type="text" id="title" name="title" required placeholder="ex: Casa de Alto Padrão">
                    </div>
                    <div class="form-group">
                        <label for="price">Preço (R$) *</label>
                        <input type="number" id="price" name="price" required placeholder="ex: 500000">
                    </div>
                    <div class="form-group">
                        <label for="location">Localização *</label>
                        <input type="text" id="location" name="location" required placeholder="ex: Barra dos Coqueiros, Aracaju - SE">
                    </div>
                </div>

                <!-- CARACTERÍSTICAS -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="propertyType">Tipo de Imóvel *</label>
                        <select id="propertyType" name="propertyType" required onchange="updateRequiredFields()">
                            <option value="">Selecione um tipo</option>
                            <option value="casa">Casa</option>
                            <option value="apartamento">Apartamento</option>
                            <option value="condominio">Condomínio</option>
                            <option value="condominio-casa">Condomínio de Casa</option>
                            <option value="lote">Lote</option>
                            <option value="comercial">Comercial</option>
                            <option value="galpao">Galpão</option>
                            <option value="chacara">Chácara</option>
                        </select>
                    </div>
                    <div class="form-group" id="bedrooms-group">
                        <label for="bedrooms">Quartos *</label>
                        <input type="number" id="bedrooms" name="bedrooms" required placeholder="ex: 3">
                    </div>
                    <div class="form-group" id="bathrooms-group">
                        <label for="bathrooms">Banheiros *</label>
                        <input type="number" id="bathrooms" name="bathrooms" required placeholder="ex: 2">
                    </div>
                    <div class="form-group">
                        <label for="area">Área (m²) *</label>
                        <input type="number" id="area" name="area" required placeholder="ex: 300">
                    </div>
                    <div class="form-group" id="condominio-group" style="display: none;">
                        <label for="condominioValue">Valor do Condomínio (R$)</label>
                        <input type="number" id="condominioValue" name="condominioValue" placeholder="ex: 500">
                    </div>
                </div>

                <!-- DESCRIÇÃO -->
                <div class="form-group" id="description-group">
                    <label for="description">Descrição do Imóvel *</label>
                    <textarea id="description" name="description" required placeholder="Descreva o imóvel em detalhes..."></textarea>
                </div>

                <!-- IMAGENS -->
                <div class="form-group">
                    <label>Imagens do Imóvel</label>
                    <div class="image-inputs" id="imageInputsContainer">
                        <div class="image-input-item">
                            <input type="url" class="property-image" placeholder="URL da Imagem 1 (principal)" required>
                            <div class="image-preview"></div>
                        </div>
                    </div>
                    <button type="button" class="btn-add-image" onclick="addImageInput()">+ Adicionar Mais Imagens</button>
                </div>

                <!-- EXCLUSIVO -->
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="exclusive" name="exclusive">
                        <label for="exclusive" style="margin: 0;">Marcar como Exclusivo</label>
                    </div>
                </div>

                <!-- ACTIONS -->
                <div class="form-actions">
                    <button type="reset" class="btn-reset">Limpar</button>
                    <button type="submit" class="btn-submit" id="submitBtn">
                        <i class="fas fa-save"></i> Adicionar Imóvel
                    </button>
                </div>
            </form>
        </div>

        <!-- PROPERTIES LIST -->
        <div class="properties-list">
            <h2><i class="fas fa-home"></i> Imóveis Cadastrados</h2>
            <div id="propertiesList" class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Carregando imóveis...</p>
            </div>
        </div>
    </div>

    <!-- FIREBASE SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { 
             getFirestore, 
             collection, 
             addDoc, 
             getDocs,
             deleteDoc,
             doc,
             serverTimestamp,
             query,
             orderBy,
             getDoc,
             updateDoc
         } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBF03NrHyYFuSUexSpVlBbpdM7hPDxtlnk",
            authDomain: "cathia-31ee5.firebaseapp.com",
            databaseURL: "https://cathia-31ee5-default-rtdb.firebaseio.com",
            projectId: "cathia-31ee5",
            storageBucket: "cathia-31ee5.firebasestorage.app",
            messagingSenderId: "405908626614",
            appId: "1:405908626614:web:9c3585abd8782a3fd71a17",
            measurementId: "G-Q1EKVQMC23"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Variável para controlar modo de edição
        let editingPropertyId = null;

        // Atualizar campos obrigatórios baseado no tipo de imóvel
         window.updateRequiredFields = function() {
             const propertyType = document.getElementById('propertyType').value;
             const bedroomsInput = document.getElementById('bedrooms');
             const bedroomsGroup = document.getElementById('bedrooms-group');
             const bathroomsInput = document.getElementById('bathrooms');
             const bathroomsGroup = document.getElementById('bathrooms-group');
             const descriptionInput = document.getElementById('description');
             const descriptionGroup = document.getElementById('description-group');
             const descriptionLabel = descriptionGroup.querySelector('label');
             const condominioGroup = document.getElementById('condominio-group');
             const condominioInput = document.getElementById('condominioValue');
             
             if (propertyType === 'lote') {
                 // Oculta campos de quartos e banheiros para lote
                 bedroomsGroup.style.display = 'none';
                 bedroomsInput.removeAttribute('required');
                 bedroomsInput.value = '0';
                 
                 bathroomsGroup.style.display = 'none';
                 bathroomsInput.removeAttribute('required');
                 bathroomsInput.value = '0';
                 
                 // Mostra descrição mas deixa opcional para lote
                 descriptionGroup.style.display = 'block';
                 descriptionInput.removeAttribute('required');
                 descriptionLabel.innerHTML = 'Descrição do Lote (Opcional)';
                 
                 // Oculta condomínio para lote
                 condominioGroup.style.display = 'none';
                 condominioInput.removeAttribute('required');
                 condominioInput.value = '';
             } else if (propertyType === 'condominio' || propertyType === 'condominio-casa') {
                 // Para condomínios, mostra campo de valor do condomínio
                 bedroomsGroup.style.display = 'flex';
                 bedroomsInput.setAttribute('required', '');
                 
                 bathroomsGroup.style.display = 'flex';
                 bathroomsInput.setAttribute('required', '');
                 
                 descriptionGroup.style.display = 'block';
                 descriptionInput.setAttribute('required', '');
                 descriptionLabel.innerHTML = 'Descrição do Imóvel *';
                 
                 condominioGroup.style.display = 'flex';
                 // Condomínio é opcional
                 condominioInput.removeAttribute('required');
             } else {
                 // Restaura campos obrigatórios para outros tipos
                 bedroomsGroup.style.display = 'flex';
                 bedroomsInput.setAttribute('required', '');
                 
                 bathroomsGroup.style.display = 'flex';
                 bathroomsInput.setAttribute('required', '');
                 
                 descriptionGroup.style.display = 'block';
                 descriptionInput.setAttribute('required', '');
                 descriptionLabel.innerHTML = 'Descrição do Imóvel *';
                 
                 // Oculta condomínio para outros tipos
                 condominioGroup.style.display = 'none';
                 condominioInput.removeAttribute('required');
                 condominioInput.value = '';
             }
         };

         // Adicionar input de imagem
         window.addImageInput = function() {
            const container = document.getElementById('imageInputsContainer');
            const count = container.children.length + 1;
            const div = document.createElement('div');
            div.className = 'image-input-item';
            div.innerHTML = `
                <input type="url" class="property-image" placeholder="URL da Imagem ${count}">
                <div class="image-preview"></div>
                <button type="button" class="btn-add-image" style="background: #ff6b6b; color: white; margin-top: 0.5rem;" onclick="this.parentElement.remove()">Remover</button>
            `;
            container.appendChild(div);
        };

        // Preview de imagens
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('property-image')) {
                const preview = e.target.nextElementSibling;
                if (e.target.value) {
                    preview.innerHTML = `<img src="${e.target.value}" alt="Preview" onerror="this.parentElement.innerHTML='Erro ao carregar imagem'">`;
                } else {
                    preview.innerHTML = '';
                }
            }
        });

        // Submit form
        document.getElementById('propertyForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = this.querySelector('[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.disabled = true;

            try {
                // Coletar imagens
                const images = Array.from(document.querySelectorAll('.property-image'))
                    .map(input => input.value)
                    .filter(url => url);

                const propertyData = {
                     title: document.getElementById('title').value,
                     price: parseInt(document.getElementById('price').value),
                     location: document.getElementById('location').value,
                     propertyType: document.getElementById('propertyType').value,
                     bedrooms: parseInt(document.getElementById('bedrooms').value) || 0,
                     bathrooms: parseInt(document.getElementById('bathrooms').value),
                     area: parseInt(document.getElementById('area').value),
                     description: document.getElementById('description').value,
                     image: images[0] || '', // Primeira imagem como principal
                     images: images, // Todas as imagens
                     exclusive: document.getElementById('exclusive').checked,
                     condominioValue: parseInt(document.getElementById('condominioValue').value) || 0
                 };

                if (editingPropertyId) {
                    // Modo edição
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Atualizando...';
                    await updateDoc(doc(db, "properties", editingPropertyId), propertyData);
                    showMessage(`Imóvel "${propertyData.title}" atualizado com sucesso!`, 'success');
                    cancelEdit();
                } else {
                    // Modo adição
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adicionando...';
                    propertyData.createdAt = serverTimestamp();
                    const docRef = await addDoc(collection(db, "properties"), propertyData);
                    showMessage(`Imóvel "${propertyData.title}" adicionado com sucesso!`, 'success');
                }
                
                document.getElementById('propertyForm').reset();
                loadProperties();
                
            } catch (error) {
                showMessage(`Erro ao salvar imóvel: ${error.message}`, 'error');
                console.error('Erro:', error);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalText;
            }
        });

        // Mostrar mensagem
        function showMessage(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.textContent = message;
            statusDiv.className = `status-message ${type}`;
            setTimeout(() => {
                statusDiv.className = 'status-message';
            }, 5000);
        }

        // Editar propriedade
        window.editProperty = async function(propertyId) {
            try {
                const docSnap = await getDoc(doc(db, "properties", propertyId));
                
                if (!docSnap.exists()) {
                    showMessage('Imóvel não encontrado!', 'error');
                    return;
                }

                const property = docSnap.data();
                
                // Preencher formulário com dados da propriedade
                 document.getElementById('title').value = property.title || '';
                 document.getElementById('price').value = property.price || '';
                 document.getElementById('location').value = property.location || '';
                 document.getElementById('propertyType').value = property.propertyType || '';
                 document.getElementById('bedrooms').value = property.bedrooms || 0;
                 document.getElementById('bathrooms').value = property.bathrooms || 0;
                 document.getElementById('area').value = property.area || 0;
                 document.getElementById('description').value = property.description || '';
                 document.getElementById('exclusive').checked = property.exclusive || false;
                 document.getElementById('condominioValue').value = property.condominioValue || '';
                
                // Atualizar campos obrigatórios conforme tipo
                updateRequiredFields();
                
                // Carregar imagens
                const imageContainer = document.getElementById('imageInputsContainer');
                imageContainer.innerHTML = '';
                
                if (property.images && property.images.length > 0) {
                    property.images.forEach((imgUrl, index) => {
                        const div = document.createElement('div');
                        div.className = 'image-input-item';
                        div.innerHTML = `
                            <input type="url" class="property-image" placeholder="URL da Imagem ${index + 1}" value="${imgUrl}">
                            <div class="image-preview"><img src="${imgUrl}" alt="Preview" style="width: 100%; height: auto; border-radius: 4px;"></div>
                            ${index > 0 ? '<button type="button" class="btn-add-image" style="background: #ff6b6b; color: white; margin-top: 0.5rem;" onclick="this.parentElement.remove()">Remover</button>' : ''}
                        `;
                        imageContainer.appendChild(div);
                    });
                } else {
                    const div = document.createElement('div');
                    div.className = 'image-input-item';
                    div.innerHTML = `
                        <input type="url" class="property-image" placeholder="URL da Imagem 1 (principal)">
                        <div class="image-preview"></div>
                    `;
                    imageContainer.appendChild(div);
                }
                
                // Mudar modo para edição
                editingPropertyId = propertyId;
                document.getElementById('formTitle').textContent = 'Editar Imóvel';
                document.getElementById('submitBtn').innerHTML = '<i class="fas fa-save"></i> Salvar Alterações';
                document.getElementById('cancelEditBtn').style.display = 'block';
                
                // Scroll para o formulário
                document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                showMessage(`Erro ao carregar imóvel: ${error.message}`, 'error');
                console.error('Erro:', error);
            }
        };

        // Cancelar edição
        window.cancelEdit = function() {
            editingPropertyId = null;
            document.getElementById('propertyForm').reset();
            document.getElementById('formTitle').textContent = 'Adicionar Novo Imóvel';
            document.getElementById('submitBtn').innerHTML = '<i class="fas fa-save"></i> Adicionar Imóvel';
            document.getElementById('cancelEditBtn').style.display = 'none';
            
            // Restaurar campos para modo adicionar
             const bedroomsGroup = document.getElementById('bedrooms-group');
             const bathroomsGroup = document.getElementById('bathrooms-group');
             const descriptionGroup = document.getElementById('description-group');
             const condominioGroup = document.getElementById('condominio-group');
             
             bedroomsGroup.style.display = 'flex';
             bathroomsGroup.style.display = 'flex';
             descriptionGroup.style.display = 'block';
             condominioGroup.style.display = 'none';
            
            // Restaurar primeira imagem como obrigatória
            const imageInputs = document.querySelectorAll('.property-image');
            imageInputs.forEach(input => input.setAttribute('required', ''));
        };

        // Carregar propriedades
        async function loadProperties() {
            const list = document.getElementById('propertiesList');
            
            try {
                const q = query(collection(db, "properties"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);

                if (querySnapshot.empty) {
                    list.innerHTML = '<div style="padding: 2rem; text-align: center; color: #666;">Nenhum imóvel cadastrado ainda</div>';
                    return;
                }

                list.innerHTML = '';
                
                querySnapshot.forEach((doc) => {
                     const property = doc.data();
                     const item = document.createElement('div');
                     item.className = 'property-item';
                     const caracteristicas = property.propertyType === 'lote' 
                         ? `${property.bathrooms}B | ${property.area}m²`
                         : `${property.bedrooms}Q | ${property.bathrooms}B | ${property.area}m²`;
                     const condominioInfo = (property.propertyType === 'condominio' || property.propertyType === 'condominio-casa') && property.condominioValue 
                         ? `<p><strong>Condomínio:</strong> R$ ${new Intl.NumberFormat('pt-BR').format(property.condominioValue)}/mês</p>`
                         : '';
                     
                     item.innerHTML = `
                         <div class="property-info">
                             <h3>${property.title}</h3>
                             <p><strong>Preço:</strong> R$ ${new Intl.NumberFormat('pt-BR').format(property.price)}</p>
                             <p><strong>Tipo:</strong> ${property.propertyType || 'Não especificado'}</p>
                             <p><strong>Localização:</strong> ${property.location}</p>
                             <p><strong>Características:</strong> ${caracteristicas}</p>
                             ${condominioInfo}
                             ${property.exclusive ? '<p style="color: #C9A227;"><strong>✨ Exclusivo</strong></p>' : ''}
                         </div>
                        <div class="property-actions">
                            <button class="btn-edit" onclick="editProperty('${doc.id}')" style="background: #4CAF50; color: white; padding: 0.6rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; margin-right: 0.5rem;">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn-delete" onclick="deleteProperty('${doc.id}')">
                                <i class="fas fa-trash"></i> Deletar
                            </button>
                        </div>
                    `;
                    list.appendChild(item);
                });

            } catch (error) {
                list.innerHTML = `<div style="padding: 2rem; text-align: center; color: red;">Erro ao carregar imóveis: ${error.message}</div>`;
            }
        }

        // Deletar propriedade
        window.deleteProperty = async function(docId) {
            if (confirm('Tem certeza que deseja deletar este imóvel?')) {
                try {
                    await deleteDoc(doc(db, "properties", docId));
                    showMessage('Imóvel deletado com sucesso!', 'success');
                    loadProperties();
                } catch (error) {
                    showMessage(`Erro ao deletar: ${error.message}`, 'error');
                }
            }
        };

        // Carregar propriedades ao abrir a página
        loadProperties();
    </script>
</body>
</html>
